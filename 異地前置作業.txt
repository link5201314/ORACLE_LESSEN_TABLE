--1. Create USER SCHED (Login as sys)
CREATE USER "SCHED" IDENTIFIED BY "Chtadmin!2488";

GRANT "CONNECT" TO "SCHED";
GRANT "RESOURCE" TO "SCHED";
GRANT "DBA" TO "SCHED";
--GRANT "AP_ROLE" TO "SCHED";

GRANT UNLIMITED TABLESPACE TO "SCHED";
--要加上Proecdure的執行權限
--GRANT EXECUTE ON "TRW"."PMS_UPD_BENTO" TO "SCHED";

--2. Create tablespace His
--建議與主資料分開儲存空間，避免OGG互相影響
create tablespace HIS datafile '+BKDG/oratest/DATAFILE/his01.dbf' size 30G autoextend off;

alter tablespace his add datafile '+BKDG/oratest/DATAFILE/his02.dbf' size 30G;

--3. Create USER HIS (Login as sys)
CREATE USER "HIS" IDENTIFIED BY "Pass@word1234" 
      DEFAULT TABLESPACE "HIS"
      TEMPORARY TABLESPACE "TEMP";

GRANT "CONNECT" TO "HIS";
GRANT "RESOURCE" TO "HIS";

--GRANT ALTER SYSTEM TO "HIS";
--GRANT CREATE TABLE TO "HIS";
--GRANT CREATE SEQUENCE TO "HIS";
--GRANT CREATE PROCEDURE TO "HIS";

ALTER USER "HIS" QUOTA UNLIMITED ON "HIS";

--4. CREATE SEQUENCE
--DROP SEQUENCE TRW.LESSEN_TABLE_MOVE_JOB_ID_SQ;
CREATE SEQUENCE TRW.LESSEN_TABLE_MOVE_JOB_ID_SQ
INCREMENT BY 1 START WITH 1 MINVALUE 1 MAXVALUE 9999999999 NOCYCLE;

CREATE PUBLIC SYNONYM LESSEN_TABLE_MOVE_JOB_ID_SQ FOR TRW.LESSEN_TABLE_MOVE_JOB_ID_SQ;
GRANT SELECT ON TRW.LESSEN_TABLE_MOVE_JOB_ID_SQ TO SEL_ROLE, AP_ROLE;


GRANT SELECT, INSERT, UPDATE, DELETE ON HIS.SSP_TKT_TXN_HIS TO TRW, SCHED, ISAAC; 

